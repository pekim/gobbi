<!DOCTYPE html>
<html>
  <head>
    <title>gobbi</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Reference counting :: gobbi</title>
<link rel="shortcut icon" href="/gobbi/images/favicon.png" type="image/x-icon" />
<link href="/gobbi/css/font-awesome.min.css" rel="stylesheet">
<link href="/gobbi/css/nucleus.css" rel="stylesheet">
<link href="/gobbi/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/gobbi/css/bootstrap.min.css">
<script src="/gobbi/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/pekim.github.io\/gobbi\/";
</script>
<link rel="stylesheet" href="https://pekim.github.io/gobbi/css/custom.css">


    
  </head>
  <body data-url="/gobbi/reference-counting/">
    
      <header>
  <div class="logo">
    
	
  
    <p><a href="/gobbi/">gobbi</a></p>

  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/pekim/gobbi"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">


    <li class="dd-item ">
        <div>
            <a href="/gobbi/">
                <span>Introduction</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/getting-started/">
                <span>Getting started</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/application-lifecycle/">
                <span>Application lifecycle</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/build-tags/">
                <span>Build tags</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/goroutines/">
                <span>Goroutines</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/gvalue/">
                <span>gobject.Value</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/casting/">
                <span>Casting</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/signal-handling/">
                <span>Signal handling</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/variadic-functions/">
                <span>Variadic functions</span>
            </a>
        </div>
    </li>

    <li class="dd-item  active">
        <div>
            <a href="/gobbi/reference-counting/">
                <span>Reference counting</span>
            </a>
        </div>
    </li>

    <li class="dd-item ">
        <div>
            <a href="/gobbi/api/">
                <span>API Docs</span>
            </a>
        </div>
    </li>





    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/gobbi/js/lunr.min.js"></script>
        <script type="text/javascript" src="/gobbi/js/auto-complete.js"></script>
        <link href="/gobbi/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/pekim.github.io\/gobbi\/";
          
        </script>
        <script type="text/javascript" src="/gobbi/js/search.js"></script>
      </div>
    

    <h1>Reference counting</h1>
    
    
    
    

<p>The gobject library implements
<a href="https://developer.gnome.org/gobject/stable/gobject-memory.html">Object memory management</a>,
including reference counting,
for GObject derived classes.
When gobbi creates such an object and a Go object referencing it,
it will increment the reference count on the object.
When the Go object is finalized, gobbi will
decrement the GObject&rsquo;s reference count.</p>

<p>The behaviour is slightly different between objects that are
initially owned and those that are initially unowned.
In both cases gobbi attempts to do the right thing
with regard to reference counting.</p>

<h2 id="copying-gobbi-objects">Copying gobbi objects</h2>

<p>Unless there is a compelling reason,
gobbi created objects should not be copied
or cloned directly by applications,
as this would result in references to GObjects
without the necessary reference count.</p>

<p>If a copy of a gobbi Object derived class is required,
it can be achieved as a side effect
of a suitable cast like this.
As the new object is gobbi managed is will be reference
counted correctly.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">    <span style="color:#75af00">label1</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gtk</span><span style="color:#111">.</span><span style="color:#75af00">LabelNew</span><span style="color:#111">(</span><span style="color:#d88200">&#34;some text&#34;</span><span style="color:#111">)</span>
	<span style="color:#75af00">label2</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gtk</span><span style="color:#111">.</span><span style="color:#75af00">CastToLabel</span><span style="color:#111">(</span><span style="color:#75af00">label1</span><span style="color:#111">.</span><span style="color:#75af00">Object</span><span style="color:#111">())</span></code></pre></div>
<p>However in most cases even that will not be required,
and passing around the pointer
to the gobbi object will be sufficient for an application.</p>


    
    
        <div class="chevrons">
    <div id="navigation">
</div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    

    
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/gobbi/js/clipboard.min.js"></script>

<link href="/gobbi/css/featherlight.min.css" rel="stylesheet">
<script src="/gobbi/js/featherlight.min.js"></script>



<script src="/gobbi/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>